for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1:nrow(m_example3_beta),
Y = m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]]),
max(m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]])))
#ggsave(paste0("./5000실험기록/m_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
#       width = 40, height = 20, units = "cm")
print(q)
}
m_example3 <- Mhorseshoe::fixed_modified(example_W, example_z, iteration = 5000,
xi = xi_0,
step_check = TRUE)
# m_example beta trace plot
m_example3_beta <- m_example3$beta
m_example3_spend_time <- m_example3$spand_time
View(m_example3_spend_time)
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1:nrow(m_example3_beta),
Y = m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]]),
max(m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]])))
#ggsave(paste0("./5000실험기록/m_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
#       width = 40, height = 20, units = "cm")
print(q)
}
library(Mhorseshoe)
knitr::opts_chunk$set(echo = TRUE)
example3 <- Mhorseshoe::approximate_algorithm(example_W, example_z, iteration = 5000,
s = 0, xi = xi_0,
step_check = TRUE)
library(Mhorseshoe)
knitr::opts_chunk$set(echo = TRUE)
# example beta trace plot
example3_beta <- example3$beta
example3_spend_time <- example3$spend_time
View(example3_spend_time)
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1:nrow(example3_beta),
Y = example3_beta[1:nrow(example3_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(example3_beta[1:nrow(example3_beta), example_non_zero_index[i]]),
max(example3_beta[1:nrow(example3_beta), example_non_zero_index[i]])))
#ggsave(paste0("./5000실험기록/a_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
#       width = 40, height = 20, units = "cm")
print(q)
}
m_example3 <- Mhorseshoe::fixed_modified(example_W, example_z, iteration = 5000,
xi = xi_0,
step_check = TRUE)
m_example32 <- Mhorseshoe::fixed_modified(example_W, example_z, iteration = 5000,
xi = xi_0,
step_check = TRUE)
# m_example beta trace plot
m_example3_beta <- m_example32$beta
m_example3_spend_time <- m_example32$spand_time
View(m_example3_spend_time)
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1:nrow(m_example3_beta),
Y = m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]]),
max(m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]])))
#ggsave(paste0("./5000실험기록/m_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
#       width = 40, height = 20, units = "cm")
print(q)
}
# m_example beta trace plot
m_example3_beta <- m_example3$beta
m_example3_spend_time <- m_example3$spand_time
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1:nrow(m_example3_beta),
Y = m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]]),
max(m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]])))
#ggsave(paste0("./5000실험기록/m_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
#       width = 40, height = 20, units = "cm")
print(q)
}
# m_example beta trace plot
m_example3_beta <- m_example32$beta
m_example3_spend_time <- m_example32$spand_time
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1:nrow(m_example3_beta),
Y = m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]]),
max(m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]])))
#ggsave(paste0("./5000실험기록/m_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
#       width = 40, height = 20, units = "cm")
print(q)
}
m_example32 <- Mhorseshoe::fixed_modified(example_W, example_z, iteration = 5000,
library(Mhorseshoe)
xi = xi_0,
step_check = TRUE)
knitr::opts_chunk$set(echo = TRUE)
m_example32 <- Mhorseshoe::fixed_modified(example_W, example_z, iteration = 5000,
xi = xi_0,
step_check = TRUE)
# m_example beta trace plot
m_example3_beta <- m_example32$beta
m_example3_spend_time <- m_example32$spand_time
View(m_example3_spend_time)
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1:nrow(m_example3_beta),
Y = m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]]),
max(m_example3_beta[1:nrow(m_example3_beta), example_non_zero_index[i]])))
#ggsave(paste0("./5000실험기록/m_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
#       width = 40, height = 20, units = "cm")
print(q)
}
library(Mhorseshoe)
library(Mhorseshoe)
library(Mhorseshoe)
knitr::opts_chunk$set(echo = TRUE)
m_example2 <- Mhorseshoe::sampling_modified(example_W, example_z, iteration = 5000,
s = 0.1, xi = xi_0,
step_check = TRUE)
saveRDS(example3, file = "./5000실험기록/a_sample_fix.rds")
saveRDS(m_example3, file = "./5000실험기록/m_sample_fix.rds")
# m_example beta trace plot
m_example_beta <- m_example2$beta
m_example_spend_time <- m_example2$spand_time
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1:nrow(m_example_beta),
Y = m_example_beta[1:nrow(m_example_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(m_example_beta[1:nrow(m_example_beta), example_non_zero_index[i]]),
max(m_example_beta[1:nrow(m_example_beta), example_non_zero_index[i]])))
#ggsave(paste0("./5000실험기록/m_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
#       width = 40, height = 20, units = "cm")
print(q)
}
rm(m_example32)
rm(m_example3_beta, m_example3_spend_time)
rm(example3_beta, example3_spend_time)
a <- 0
for (i in 1:100) {
a <- a + exp(-0.5 - 7 * 10^(-4) * 50 * i)
}
a
rm(a)
log(xi_0)
saveRDS(m_example2, file = "./5000실험기록/m_sampletau0.rds")
rm(m_example2)
rm(example32)
# example beta trace plot
example_beta <- example3$beta
example_spend_time <- example3$spend_time
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1:nrow(example3_beta),
Y = example3_beta[1:nrow(example3_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(example3_beta[1:nrow(example3_beta), example_non_zero_index[i]]),
max(example3_beta[1:nrow(example3_beta), example_non_zero_index[i]])))
#ggsave(paste0("./5000실험기록/a_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
#       width = 40, height = 20, units = "cm")
print(q)
}
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1:nrow(example_beta),
Y = example_beta[1:nrow(example_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(example_beta[1:nrow(example_beta), example_non_zero_index[i]]),
max(example_beta[1:nrow(example_beta), example_non_zero_index[i]])))
#ggsave(paste0("./5000실험기록/a_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
#       width = 40, height = 20, units = "cm")
print(q)
}
example2 <- Mhorseshoe::approximate_algorithm(example_W, example_z, iteration = 5000,
s = 0.1, xi = xi_0,
step_check = TRUE)
# example beta trace plot
example_beta <- example2$beta
example_spend_time <- example2$spend_time
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1:nrow(example_beta),
Y = example_beta[1:nrow(example_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(example_beta[1:nrow(example_beta), example_non_zero_index[i]]),
max(example_beta[1:nrow(example_beta), example_non_zero_index[i]])))
#ggsave(paste0("./5000실험기록/a_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
#       width = 40, height = 20, units = "cm")
print(q)
}
saveRDS(example2, file = "./5000실험기록/a_sampletau0.rds")
rm(example2)
example1 <- Mhorseshoe::approximate_algorithm(example_W, example_z, iteration = 5000,
s = 0.1, xi = 1,
step_check = TRUE)
example1 <- Mhorseshoe::approximate_algorithm(example_W, example_z, iteration = 5000,
s = 0.1, xi = 1, max_Epsilon = 10^10,
step_check = TRUE)
# example beta trace plot
example_beta <- example1$beta
example_spend_time <- example1$spend_time
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1:nrow(example_beta),
Y = example_beta[1:nrow(example_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(example_beta[1:nrow(example_beta), example_non_zero_index[i]]),
max(example_beta[1:nrow(example_beta), example_non_zero_index[i]])))
#ggsave(paste0("./5000실험기록/a_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
#       width = 40, height = 20, units = "cm")
print(q)
}
saveRDS(example1, file = "./5000실험기록/a_sample1.rds")
rm(example1)
example2 <- Mhorseshoe::approximate_algorithm(example_W, example_z, iteration = 5000,
s = 0.1, xi = xi_0, max_Epsilon = 10^10,
step_check = TRUE)
# example beta trace plot
example_beta <- example2$beta
example_spend_time <- example2$spend_time
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1:nrow(example_beta),
Y = example_beta[1:nrow(example_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(example_beta[1:nrow(example_beta), example_non_zero_index[i]]),
max(example_beta[1:nrow(example_beta), example_non_zero_index[i]])))
#ggsave(paste0("./5000실험기록/a_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
#       width = 40, height = 20, units = "cm")
print(q)
}
m_example1 <- Mhorseshoe::sampling_modified(example_W, example_z, iteration = 5000,
s = 0.1, xi = 1, max_Epsilon = 10^10,
step_check = TRUE)
m_example2 <- Mhorseshoe::sampling_modified(example_W, example_z, iteration = 5000,
s = 0.1, xi = xi_0, max_Epsilon = 10^10,
step_check = TRUE)
# m_example beta trace plot
m_example_beta <- m_example2$beta
m_example_spend_time <- m_example2$spand_time
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1:nrow(m_example_beta),
Y = m_example_beta[1:nrow(m_example_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(m_example_beta[1:nrow(m_example_beta), example_non_zero_index[i]]),
max(m_example_beta[1:nrow(m_example_beta), example_non_zero_index[i]])))
#ggsave(paste0("./5000실험기록/m_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
#       width = 40, height = 20, units = "cm")
print(q)
}
# example beta trace plot
example_beta <- example2$beta
example_spend_time <- example2$spend_time
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1:nrow(example_beta),
Y = example_beta[1:nrow(example_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(example_beta[1:nrow(example_beta), example_non_zero_index[i]]),
max(example_beta[1:nrow(example_beta), example_non_zero_index[i]])))
#ggsave(paste0("./5000실험기록/a_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
#       width = 40, height = 20, units = "cm")
print(q)
}
View(example_spend_time)
m_example1 <- Mhorseshoe::sampling_modified(example_W, example_z, iteration = 5000,
s = 0.1, xi = 1, max_Epsilon = 10^10,
step_check = TRUE)
# m_example beta trace plot
m_example_beta <- m_example1$beta
m_example_spend_time <- m_example1$spand_time
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1:nrow(m_example_beta),
Y = m_example_beta[1:nrow(m_example_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(m_example_beta[1:nrow(m_example_beta), example_non_zero_index[i]]),
max(m_example_beta[1:nrow(m_example_beta), example_non_zero_index[i]])))
#ggsave(paste0("./5000실험기록/m_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
#       width = 40, height = 20, units = "cm")
print(q)
}
saveRDS(m_example1, file = "./5000실험기록/m_sample1.rds")
rm(m_example1)
rm(m_example2)
rm(example2)
# example beta trace plot
example_beta <- example3$beta
example_spend_time <- example3$spend_time
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1001:nrow(example_beta),
Y = example_beta[1001:nrow(example_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(example_beta[1001:nrow(example_beta), example_non_zero_index[i]]),
max(example_beta[1001:nrow(example_beta), example_non_zero_index[i]])))
ggsave(paste0("./5000실험기록/a_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
width = 40, height = 20, units = "cm")
}
# m_example beta trace plot
m_example_beta <- m_example3$beta
m_example_spend_time <- m_example3$spand_time
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1001:nrow(m_example_beta),
Y = m_example_beta[1001:nrow(m_example_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(m_example_beta[1001:nrow(m_example_beta), example_non_zero_index[i]]),
max(m_example_beta[1001:nrow(m_example_beta), example_non_zero_index[i]])))
ggsave(paste0("./5000실험기록/m_sample_fix/", "beta", example_non_zero_index[i], ".png"), q,
width = 40, height = 20, units = "cm")
}
sum(m_example3$spand_time$total_time)
sum(example3$spend_time$total_time)
# L2 non-zero
m_example_beta_mean <- apply(m_example_beta[1001:5000, ], MARGIN = 2, mean)
# L2 non-zero
m_example_beta_mean <- apply(m_example_beta[1001:5000, ], MARGIN = 1, mean)
# L2 non-zero
m_example_beta_mean <- apply(m_example_beta[1001:5000, ], MARGIN = 2, mean)
example_beta_mean <- apply(example_beta[1001:5000, ], MARGIN = 2, mean)
t(example_non_zero_coefficents - m_example_beta_mean[example_non_zero_index]) %*% (example_non_zero_coefficents - m_example_beta_mean[example_non_zero_index])
sqrt(t(example_non_zero_coefficents - m_example_beta_mean[example_non_zero_index]) %*% (example_non_zero_coefficents - m_example_beta_mean[example_non_zero_index]))
sqrt(t(example_non_zero_coefficents - example_beta_mean[example_non_zero_index]) %*% (example_non_zero_coefficents - example_beta_mean[example_non_zero_index]))
horseshoe_2 <- readRDS(file = "./5000실험기록/horseshoe_2.rds")
# horseshoe beta plot
horseshoe2_beta <- horseshoe_2$BetaSamples
# horseshoe beta plot
horseshoe2_beta <- horseshoe_2$BetaSamples
View(t(horseshoe2_beta[, 1001:5000]))
horseshoe2_beta_mean <- apply(t(horseshoe2_beta[, 1001:5000]), MARGIN = 2, mean)
sqrt(t(example_non_zero_coefficents - horseshoe2_beta_mean[example_non_zero_index]) %*% (example_non_zero_coefficents - horseshoe2_beta_mean[example_non_zero_index]))
# L2 zero
t(m_example_beta_mean[-example_non_zero_index]) %*% (m_example_beta_mean[-example_non_zero_index])
t(example_beta_mean[-example_non_zero_index]) %*% (example_beta_mean[-example_non_zero_index])
t(horseshoe2_beta_mean[-example_non_zero_index]) %*% (horseshoe2_beta_mean[-example_non_zero_index])
# example & m_example active_set
ggplot(data = data.frame(X = 101:nrow(example_spend_time),
approximate_active_set = example_spend_time$total_active_column[101:nrow(example_spend_time)],
modified_active_set = m_example_spend_time$`number of active set columns`[101:nrow(m_example_spend_time)])) +
geom_line(mapping = aes(x = X, y = approximate_active_set, color = "red")) +
geom_line(mapping = aes(x = X, y = modified_active_set, color = "blue")) +
scale_color_manual(values = c("red", "blue"), breaks = c("red", "blue"),
labels = c("approximate_active_set", "modified_active_set")) +
labs(x = "iteration", y = "number of active set")
horseshoe_1 <- readRDS(file = "./5000실험기록/horseshoe_1.rds")
horseshoe1_beta <- horseshoe_1$BetaSamples
horseshoe1_beta_mean <- apply(t(horseshoe1_beta[, 1001:5000]), MARGIN = 2, mean)
sqrt(t(example_non_zero_coefficents - horseshoe1_beta_mean[example_non_zero_index]) %*% (example_non_zero_coefficents - horseshoe1_beta_mean[example_non_zero_index]))
t(horseshoe1_beta_mean[-example_non_zero_index]) %*% (horseshoe1_beta_mean[-example_non_zero_index])
rm(example3, m_example3)
rm(horseshoe_1, horseshoe_2)
rm(horseshoe1_beta, horseshoe2_beta)
rm(horseshoe1_beta_mean, horseshoe2_beta_mean)
example1 <- readRDS(file = "./5000실험기록/a_sampletau0.rds")
example1 <- readRDS(file = "./5000실험기록/a_sample1.rds")
example1 <- readRDS(file = "./5000실험기록/a_sample1.rds")
m_example1 <- readRDS(file = "./5000실험기록/m_sample1.rds")
# example beta trace plot
example_beta <- example1$beta
example_spend_time <- example1$spend_time
# m_example beta trace plot
m_example_beta <- m_example1$beta
m_example_spend_time <- m_example1$spand_time
sum(m_example_spend_time$total_time)
sum(example_spend_time$total_time)
sum(m_example_spend_time$total_time)
sum(example_spend_time$total_time)
sum(m_example_spend_time$total_time)
# L2 non-zero
m_example_beta_mean <- apply(m_example_beta[1001:5000, ], MARGIN = 2, mean)
example_beta_mean <- apply(example_beta[1001:5000, ], MARGIN = 2, mean)
sqrt(t(example_non_zero_coefficents - m_example_beta_mean[example_non_zero_index]) %*% (example_non_zero_coefficents - m_example_beta_mean[example_non_zero_index]))
sqrt(t(example_non_zero_coefficents - example_beta_mean[example_non_zero_index]) %*% (example_non_zero_coefficents - example_beta_mean[example_non_zero_index]))
# L2 zero
t(m_example_beta_mean[-example_non_zero_index]) %*% (m_example_beta_mean[-example_non_zero_index])
t(example_beta_mean[-example_non_zero_index]) %*% (example_beta_mean[-example_non_zero_index])
# example & m_example active_set
ggplot(data = data.frame(X = 1:nrow(example_spend_time),
approximate_active_set = example_spend_time$total_active_column[1:nrow(example_spend_time)],
modified_active_set = m_example_spend_time$`number of active set columns`[101:nrow(m_example_spend_time)])) +
geom_line(mapping = aes(x = X, y = approximate_active_set, color = "red")) +
geom_line(mapping = aes(x = X, y = modified_active_set, color = "blue")) +
scale_color_manual(values = c("red", "blue"), breaks = c("red", "blue"),
labels = c("approximate_active_set", "modified_active_set")) +
labs(x = "iteration", y = "number of active set")
# example & m_example active_set
ggplot(data = data.frame(X = 1:nrow(example_spend_time),
approximate_active_set = example_spend_time$total_active_column[1:nrow(example_spend_time)],
modified_active_set = m_example_spend_time$`number of active set columns`[101:nrow(m_example_spend_time)])) +
geom_line(mapping = aes(x = X, y = approximate_active_set, color = "red")) +
geom_line(mapping = aes(x = X, y = modified_active_set, color = "blue")) +
scale_color_manual(values = c("red", "blue"), breaks = c("red", "blue"),
labels = c("approximate_active_set", "modified_active_set")) +
labs(x = "iteration", y = "number of active set")
# example & m_example active_set
ggplot(data = data.frame(X = 1:nrow(example_spend_time),
approximate_active_set = example_spend_time$total_active_column[1:nrow(example_spend_time)],
modified_active_set = m_example_spend_time$`number of active set columns`[1:nrow(m_example_spend_time)])) +
geom_line(mapping = aes(x = X, y = approximate_active_set, color = "red")) +
geom_line(mapping = aes(x = X, y = modified_active_set, color = "blue")) +
scale_color_manual(values = c("red", "blue"), breaks = c("red", "blue"),
labels = c("approximate_active_set", "modified_active_set")) +
labs(x = "iteration", y = "number of active set")
rm(example1, m_example1)
example2 <- readRDS(file = "./5000실험기록/a_sampletau0.rds")
m_example2 <- readRDS(file = "./5000실험기록/m_sampletau0.rds")
# example beta trace plot
example_beta <- example2$beta
example_spend_time <- example2$spend_time
# m_example beta trace plot
m_example_beta <- m_example2$beta
m_example_spend_time <- m_example2$spand_time
sum(m_example_spend_time$total_time)
sum(example_spend_time$total_time)
# example & m_example active_set
ggplot(data = data.frame(X = 1:nrow(example_spend_time),
approximate_active_set = example_spend_time$total_active_column[1:nrow(example_spend_time)],
modified_active_set = m_example_spend_time$`number of active set columns`[1:nrow(m_example_spend_time)])) +
geom_line(mapping = aes(x = X, y = approximate_active_set, color = "red")) +
geom_line(mapping = aes(x = X, y = modified_active_set, color = "blue")) +
scale_color_manual(values = c("red", "blue"), breaks = c("red", "blue"),
labels = c("approximate_active_set", "modified_active_set")) +
labs(x = "iteration", y = "number of active set")
# example & m_example active_set
ggplot(data = data.frame(X = 101:nrow(example_spend_time),
approximate_active_set = example_spend_time$total_active_column[101:nrow(example_spend_time)],
modified_active_set = m_example_spend_time$`number of active set columns`[101:nrow(m_example_spend_time)])) +
geom_line(mapping = aes(x = X, y = approximate_active_set, color = "red")) +
geom_line(mapping = aes(x = X, y = modified_active_set, color = "blue")) +
scale_color_manual(values = c("red", "blue"), breaks = c("red", "blue"),
labels = c("approximate_active_set", "modified_active_set")) +
labs(x = "iteration", y = "number of active set")
example2 <- Mhorseshoe::approximate_algorithm(example_W, example_z, iteration = 5000,
s = 0.1, xi = xi_0, max_Epsilon = 10^10,
step_check = TRUE)
# example beta trace plot
example_beta <- example2$beta
example_spend_time <- example2$spend_time
sum(m_example_spend_time$total_time)
sum(example_spend_time$total_time)
# L2 non-zero
m_example_beta_mean <- apply(m_example_beta[1001:5000, ], MARGIN = 2, mean)
example_beta_mean <- apply(example_beta[1001:5000, ], MARGIN = 2, mean)
sqrt(t(example_non_zero_coefficents - m_example_beta_mean[example_non_zero_index]) %*% (example_non_zero_coefficents - m_example_beta_mean[example_non_zero_index]))
sqrt(t(example_non_zero_coefficents - example_beta_mean[example_non_zero_index]) %*% (example_non_zero_coefficents - example_beta_mean[example_non_zero_index]))
# L2 zero
t(m_example_beta_mean[-example_non_zero_index]) %*% (m_example_beta_mean[-example_non_zero_index])
t(example_beta_mean[-example_non_zero_index]) %*% (example_beta_mean[-example_non_zero_index])
# example beta trace plot
example_beta <- example2$beta
example_spend_time <- example2$spend_time
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1001:nrow(example_beta),
Y = example_beta[1001:nrow(example_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(example_beta[1001:nrow(example_beta), example_non_zero_index[i]]),
max(example_beta[1001:nrow(example_beta), example_non_zero_index[i]])))
ggsave(paste0("./5000실험기록/a_sampletau0/", "beta", example_non_zero_index[i], ".png"), q,
width = 40, height = 20, units = "cm")
}
# m_example beta trace plot
m_example_beta <- m_example2$beta
m_example_spend_time <- m_example2$spand_time
for (i in 1:length(example_non_zero_index)) {
q <- ggplot(data = data.frame(X = 1001:nrow(m_example_beta),
Y = m_example_beta[1001:nrow(m_example_beta), example_non_zero_index[i]])) +
geom_line(mapping = aes(x = X, y = Y)) +
labs(x = str_c("beta ", example_non_zero_index[i]), y = "value",
title = str_c("true value = ", example_non_zero_coefficents[i])) +
coord_cartesian(ylim = c(min(m_example_beta[1001:nrow(m_example_beta), example_non_zero_index[i]]),
max(m_example_beta[1001:nrow(m_example_beta), example_non_zero_index[i]])))
ggsave(paste0("./5000실험기록/m_sampletau0/", "beta", example_non_zero_index[i], ".png"), q,
width = 40, height = 20, units = "cm")
}
# L2 non-zero
m_example_beta_mean <- apply(m_example_beta[1001:5000, ], MARGIN = 2, mean)
example_beta_mean <- apply(example_beta[1001:5000, ], MARGIN = 2, mean)
sqrt(t(example_non_zero_coefficents - m_example_beta_mean[example_non_zero_index]) %*% (example_non_zero_coefficents - m_example_beta_mean[example_non_zero_index]))
sqrt(t(example_non_zero_coefficents - example_beta_mean[example_non_zero_index]) %*% (example_non_zero_coefficents - example_beta_mean[example_non_zero_index]))
